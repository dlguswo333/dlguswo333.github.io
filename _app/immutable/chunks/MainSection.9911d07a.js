import{s as K,e as P,u as Q,g as U,f as V,c as T,o as X,b as Y,d as _}from"./scheduler.6402f0dd.js";import{S as Z,i as v,g as x,s as $,h as tt,j as et,c as st,f as S,k as L,a as q,x as lt,d as nt,t as it,H as at,e as O,F as ot}from"./index.0cc09f3a.js";import{s as w,h as b,t as ht}from"./store.be990f37.js";const ct=(i,t)=>{let l=0,e=0,n=0;return function(){e=Date.now(),clearTimeout(n),e-l>=t?(l=e,i()):n=setTimeout(i,t)}};function R(i){let t,l;return{c(){t=new at(!1),l=O(),this.h()},l(e){t=ot(e,!1),l=O(),this.h()},h(){t.a=l},m(e,n){t.m(i[0],e,n),q(e,l,n)},p(e,n){n&1&&t.p(e[0])},d(e){e&&(S(l),t.d())}}}function ut(i){let t,l,e,n;const r=i[5].default,h=P(r,i,i[4],null);let o=i[0]&&R(i);return{c(){t=x("main"),h&&h.c(),l=$(),o&&o.c(),this.h()},l(s){t=tt(s,"MAIN",{class:!0});var c=et(t);h&&h.l(c),l=st(c),o&&o.l(c),c.forEach(S),this.h()},h(){L(t,"class",e=`max-w-[900px] w-full py-2 ${i[1]?i[1]:""}`)},m(s,c){q(s,t,c),h&&h.m(t,null),lt(t,l),o&&o.m(t,null),i[6](t),n=!0},p(s,[c]){h&&h.p&&(!n||c&16)&&Q(h,r,s,s[4],n?V(r,s[4],c,null):U(s[4]),null),s[0]?o?o.p(s,c):(o=R(s),o.c(),o.m(t,null)):o&&(o.d(1),o=null),(!n||c&2&&e!==(e=`max-w-[900px] w-full py-2 ${s[1]?s[1]:""}`))&&L(t,"class",e)},i(s){n||(nt(h,s),n=!0)},o(s){it(h,s),n=!1},d(s){s&&S(t),h&&h.d(s),o&&o.d(),i[6](null)}}}const rt=100;function ft(i,t,l){let e,n,r;T(i,w,a=>l(7,e=a)),T(i,b,a=>l(8,n=a)),T(i,ht,a=>l(9,r=a));let{$$slots:h={},$$scope:o}=t,{html:s=null}=t,{className:c=null}=t,{tocDataExists:d=!1}=t,u=null;X(()=>{if(!d||!u||!u)return;_(w,e=!0,e),_(b,n=null,n);const a=[...u.querySelectorAll("h1,h2,h3,h4")],B=ct(()=>{let E=null,C=null,I=0,M=0,y=0,D=0,N=0,k=0;a.some((p,H)=>{const f=p.getBoundingClientRect().top,m=a[H+1],g=(m==null?void 0:m.getBoundingClientRect().top)??(u==null?void 0:u.getBoundingClientRect().bottom),G=f<0&&(!m||0<g);E===null&&G&&(M=H,E=p,I=f,N=g-f);const J=f<window.innerHeight&&(!m||window.innerHeight<g);if(C===null&&J)return D=H,C=p,y=f,k=g-f,!0});const F=(0-I)/N,j=(window.innerHeight-y)/k,W=r*(F+M),z=r*(j+D);_(b,n={top:Math.floor(W),bottom:Math.floor(z)},n)},rt);return document.addEventListener("scroll",B),()=>{_(w,e=!1,e),document.removeEventListener("scroll",B)}});function A(a){Y[a?"unshift":"push"](()=>{u=a,l(2,u)})}return i.$$set=a=>{"html"in a&&l(0,s=a.html),"className"in a&&l(1,c=a.className),"tocDataExists"in a&&l(3,d=a.tocDataExists),"$$scope"in a&&l(4,o=a.$$scope)},[s,c,u,d,o,h,A]}class dt extends Z{constructor(t){super(),v(this,t,ft,ut,K,{html:0,className:1,tocDataExists:3})}}export{dt as M};
