import{s as y,e as D,u as M,g as k,f as C,c as p,o as I,d as f,b as B}from"./scheduler.db0ac06a.js";import{S as L,i as q,g as v,s as A,h as O,j,c as R,f as g,k as w,a as H,y as W,d as z,t as F,H as G,e as E,E as J}from"./index.22365a7a.js";import{s as _,c as d}from"./store.6cfcb23f.js";const K=(n,e)=>{let a=0,t=0,l=0;return function(){t=Date.now(),clearTimeout(l),t-a>=e?(a=t,n()):l=setTimeout(n,e)}};function S(n){let e,a;return{c(){e=new G(!1),a=E(),this.h()},l(t){e=J(t,!1),a=E(),this.h()},h(){e.a=a},m(t,l){e.m(n[0],t,l),H(t,a,l)},p(t,l){l&1&&e.p(t[0])},d(t){t&&(g(a),e.d())}}}function P(n){let e,a,t,l;const r=n[5].default,m=D(r,n,n[4],null);let i=n[0]&&S(n);return{c(){e=v("main"),m&&m.c(),a=A(),i&&i.c(),this.h()},l(s){e=O(s,"MAIN",{class:!0});var u=j(e);m&&m.l(u),a=R(u),i&&i.l(u),u.forEach(g),this.h()},h(){w(e,"class",t=`max-w-[900px] w-full py-2 ${n[1]?n[1]:""}`)},m(s,u){H(s,e,u),m&&m.m(e,null),W(e,a),i&&i.m(e,null),n[6](e),l=!0},p(s,[u]){m&&m.p&&(!l||u&16)&&M(m,r,s,s[4],l?C(r,s[4],u,null):k(s[4]),null),s[0]?i?i.p(s,u):(i=S(s),i.c(),i.m(e,null)):i&&(i.d(1),i=null),(!l||u&2&&t!==(t=`max-w-[900px] w-full py-2 ${s[1]?s[1]:""}`))&&w(e,"class",t)},i(s){l||(z(m,s),l=!0)},o(s){F(m,s),l=!1},d(s){s&&g(e),m&&m.d(s),i&&i.d(),n[6](null)}}}const Q=50;function U(n,e,a){let t,l;p(n,_,o=>a(7,t=o)),p(n,d,o=>a(8,l=o));let{$$slots:r={},$$scope:m}=e,{html:i=null}=e,{className:s=null}=e,{tocDataExists:u=!1}=e,c=null;I(()=>{if(!u||!c)return;f(_,t=!0,t);const o=[...c.querySelectorAll("h1,h2,h3,h4")],b=K(()=>{o.some((T,h)=>{if(T.getBoundingClientRect().top>window.innerHeight/2)return f(d,l=Math.max(Number(h)-1,0),l),!0;h===o.length-1&&f(d,l=Number(h),l)})},Q);return document.addEventListener("scroll",b),()=>{f(_,t=!1,t),document.removeEventListener("scroll",b)}});function N(o){B[o?"unshift":"push"](()=>{c=o,a(2,c)})}return n.$$set=o=>{"html"in o&&a(0,i=o.html),"className"in o&&a(1,s=o.className),"tocDataExists"in o&&a(3,u=o.tocDataExists),"$$scope"in o&&a(4,m=o.$$scope)},[i,s,c,u,m,r,N]}class Z extends L{constructor(e){super(),q(this,e,U,P,y,{html:0,className:1,tocDataExists:3})}}export{Z as M};
