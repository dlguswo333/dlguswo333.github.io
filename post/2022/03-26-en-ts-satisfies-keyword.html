<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="../../favicon.ico" />
		<meta name="viewport" content="width=device-width" />
		
		<link href="../../_app/immutable/assets/0.2765d8c3.css" rel="stylesheet">
		<link rel="modulepreload" href="../../_app/immutable/entry/start.163bd52d.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/scheduler.db0ac06a.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/singletons.6f48930b.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.1bcf888f.js">
		<link rel="modulepreload" href="../../_app/immutable/entry/app.fd85d4b9.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.ffb65d84.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/0.b90cd982.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.a82faf3f.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/GithubMark.7da6da40.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/store.53f04f50.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/5.5a74e115.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/each.e59479a4.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/Category.d398287e.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/MainSection.e5725b49.js"><title>Typescript satisfies keyword : dlguswo333&#39;s blog</title><!-- HEAD_svelte-etxm8u_START --><!-- HEAD_svelte-etxm8u_END -->
		<!-- [TODO] For portability I can erase the following elements and inject them from index.ts when building? -->
		<title>dlguswo333's Blog</title>
		<meta name="google-site-verification" content="GIhlBkE7qu5AWLVmQ4w2lBcxEw-AumQhdQf_2zR2X4s" />
	</head>
	<body data-sveltekit-preload-data="hover">
		<script>
			const systemTheme= window.matchMedia('(prefers-color-scheme:dark)').matches ? 'dark' : 'light';
			const rootElement = document.querySelector('body');
			try {
				const storedValue = JSON.parse(localStorage.getItem('color-theme') || 'null');
				const currentTheme = storedValue === 'light' || storedValue === 'dark' ? storedValue : systemTheme;
				if(rootElement) {
  				rootElement.classList.add(currentTheme);
				}
			} catch {
				rootElement.classList.add(systemTheme);
			}
		</script>
		<div id="root">  <header class="p-2 sticky top-0 flex flex-row items-center justify-between border-b border-b-gray-300 bg-gray-50 dark:bg-[#2c3039] dark:border-b-gray-700"><div class="flex flex-row items-center gap-1"> <a href="/" class="inline-block h-8 w-8" data-svelte-h="svelte-htzscq"><span class="hidden">Go To Home</span> <img src="/favicon.svg" alt="Logo"></a> <button type="button" title="Toggle color theme" class="group"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" class="h-8 w-8 transition"><rect x="3" y="3" width="94" height="94" stroke-width="6" rx="16" ry="16" class="stroke-gray-600 fill-none"></rect></svg></button> </div> <div class="flex flex-row items-center"><a href="/categories" class="h-8 flex items-center justify-center mr-2 last:mr-1 px-1 py-0.5 rounded hover:bg-gray-200 dark:hover:bg-slate-600 dark:hover:text-white">Categories</a> <a href="/tags" class="h-8 flex items-center justify-center mr-2 last:mr-1 px-1 py-0.5 rounded hover:bg-gray-200 dark:hover:bg-slate-600 dark:hover:text-white">Tags</a> <a href="/about" class="h-8 flex items-center justify-center mr-2 last:mr-1 px-1 py-0.5 rounded hover:bg-gray-200 dark:hover:bg-slate-600 dark:hover:text-white">About</a></div></header>  <div class="flex flex-row flex-grow justify-center p-2 lg:p-0 lg:pr-[300px]"> <aside class="w-[300px] overflow-hidden hidden mt-10 self-start md:!flex md:sticky md:top-14 flex-col justify-center items-center p-3
  "><ul class="w-full max-h-[80vh] overflow-auto"></ul></aside>  <div class="flex flex-col justify-center min-w-0"><div class="max-w-[900px] flex flex-col items-center py-6 gap-3"><h1 class="text-4xl font-bold text-center">Typescript satisfies keyword</h1> <span>2022-03-26 (Edited 2022-09-22)</span> <button class="px-2 py-0.5 rounded-lg shadow-md shadow-emerald-50 border-l-slate-100 bg-sky-300 text-white hover:bg-sky-500 dark:shadow-emerald-900 transition">/Programming</button> <div><button class="last:mr-0 bg-green-100 hover:bg-green-400 hover:text-white dark:text-black transition px-2 py-0.5 rounded-xl shadow-md dark:shadow-green-900" style="margin-right: 0.25rem; margin-left: 0.5rem">#typescript</button><button class="last:mr-0 bg-green-100 hover:bg-green-400 hover:text-white dark:text-black transition px-2 py-0.5 rounded-xl shadow-md dark:shadow-green-900" style="margin-right: 0.25rem; margin-left: 0rem">#javascript</button></div></div> <hr class="bg-gray-400 my-4">  <main class="max-w-[900px] w-full py-2 post"> <!-- HTML_TAG_START --><p>With Typescript, you can do strict type checking at compile time or before,
thanks to Typescript's features and help from IDE.</p>
<!--more-->
<p>Let us say we want to define an object having
properties of smartphones.
We can achieve it like the code below:</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">const</span> <span class="token constant">SMARTPHONE_MAPPING</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">  <span class="token constant">IPHONE_12</span> <span class="token operator">:</span> <span class="token punctuation">{</span>displaySize<span class="token operator">:</span>   <span class="token number">6.06</span><span class="token punctuation">,</span>  weight<span class="token operator">:</span> <span class="token string">"164g"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="3">  <span class="token constant">GALAXY_S22</span><span class="token operator">:</span> <span class="token punctuation">{</span>displaySize<span class="token operator">:</span>   <span class="token number">6.1</span><span class="token punctuation">,</span>   weight<span class="token operator">:</span> <span class="token string">"168g"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="4"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code></pre>
<p>Of course, there are numerous phones out there,
so we might add more phones later on. Also,
we do not know what names those phone will be called,
so <code>SMARTPHONE_MAPPING</code> would have arbitrary random keys.</p>
<p>But while adding more phones, we do not want to introduce any errors,
such as usual <em><strong>developer errors</strong></em> like below:</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">const</span> <span class="token constant">SMARTPHONE_MAPPING</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">  <span class="token constant">IPHONE_12</span> <span class="token operator">:</span> <span class="token punctuation">{</span>displaySize<span class="token operator">:</span>   <span class="token number">6.06</span><span class="token punctuation">,</span>  weight<span class="token operator">:</span> <span class="token string">"164g"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="3">  <span class="token constant">GALAXY_S22</span><span class="token operator">:</span> <span class="token punctuation">{</span>displaySize<span class="token operator">:</span>   <span class="token number">6.1</span><span class="token punctuation">,</span>   weight<span class="token operator">:</span> <span class="token string">"168g"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="4">  <span class="token constant">IPHONE_13</span> <span class="token operator">:</span> <span class="token punctuation">{</span>dispaylSize<span class="token operator">:</span>   <span class="token number">7</span><span class="token punctuation">,</span>     weight<span class="token operator">:</span> <span class="token string">"150g"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// key typo</span>
</span><span class="code-line line-number" line="5">  <span class="token constant">GALAXY_S23</span><span class="token operator">:</span> <span class="token punctuation">{</span>displaySize<span class="token operator">:</span>   <span class="token number">7</span><span class="token punctuation">,</span>                   <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// missing key</span>
</span><span class="code-line line-number" line="6"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code></pre>
<br>
<p>What we want inside <code>SMARTPHONE_MAPPING</code> are nothing but
display size and weight properties only.
How do we ensure that the values in the object are of the type?
Well, we can give a type to the object, like below:</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">SMARTPHONE_MAP_TYPE</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">{</span>displaySize<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> weight<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="2"><span class="token comment">// Or we can defind the type as Record.</span>
</span><span class="code-line line-number" line="3"><span class="token comment">// type SMARTPHONE_MAP_TYPE = Record&#x3C;string, {displaySize: number, weight: string}}></span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token keyword">const</span> <span class="token constant">SMARTPHONE_MAPPING</span><span class="token operator">:</span> <span class="token constant">SMARTPHONE_MAP_TYPE</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">  <span class="token constant">IPHONE_12</span> <span class="token operator">:</span> <span class="token punctuation">{</span>displaySize<span class="token operator">:</span>   <span class="token number">6.06</span><span class="token punctuation">,</span>  weight<span class="token operator">:</span> <span class="token string">"164g"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="7">  <span class="token constant">GALAXY_S22</span><span class="token operator">:</span> <span class="token punctuation">{</span>displaySize<span class="token operator">:</span>   <span class="token number">6.1</span><span class="token punctuation">,</span>   weight<span class="token operator">:</span> <span class="token string">"168g"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="8"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code></pre>
<br>
<p>But the problem of giving the object a type is that
IDE now does not show us the autocomplete of the member keys.</p>
<p><img src="/img/2022-03-26-ts-satisfies-keyword/with-autocomplete.png" alt="with-autocomplete"></p>
<p><strong>Before Having explicit type</strong>
<br><br></p>
<p><img src="/img/2022-03-26-ts-satisfies-keyword/without-autocomplete.png" alt="without-autocomplete"></p>
<p><strong>After Having explicit type</strong>
<br><br></p>
<p>Well, why does this happen?
This is because the type of the variable is <code>SMARTPHONE_MAP_TYPE</code>,
where there is no information about what is in the object.
<strong>All the information about what's inside the variable
has been deprecated.</strong> All it knows about the keys is that
they are string type. Please take a look at the type hints
and find out what are the differences.</p>
<p><img src="/img/2022-03-26-ts-satisfies-keyword/without-type.png" alt="without-type"></p>
<p><strong>Before Having explicit type</strong>
<br><br></p>
<p><img src="/img/2022-03-26-ts-satisfies-keyword/with-type.png" alt="with-type"></p>
<p><strong>After Having explicit type</strong>
<br><br></p>
<p><code>SMARTPHONE_MAP_TYPE</code> does not contain any information about
what are members but only that the keys are in string,
and the values are in object containing the two properties.</p>
<p><code>SMARTPHONE_MAPPING</code> does know the member keys, but
giving the explicit type to the object made it
blind about what is inside the object.</p>
<h2>Solution</h2>
<p>To solve this, we can implement a generic function
which accepts <code>arg</code> which extends <code>SMARTPHONE_MAP_TYPE</code>,
and returns <code>arg</code> as is. See <code>asType</code> function below:</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">SMARTPHONE_MAP_TYPE</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">{</span>displaySize<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> weight<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">asType</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token constant">SMARTPHONE_MAP_TYPE</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4">  <span class="token keyword">return</span> arg<span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="6">
</span><span class="code-line line-number" line="7"><span class="token keyword">const</span> <span class="token constant">SMARTPHONE_MAPPING</span> <span class="token operator">=</span> <span class="token function">asType</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="8">  <span class="token constant">IPHONE_12</span> <span class="token operator">:</span> <span class="token punctuation">{</span>displaySize<span class="token operator">:</span>   <span class="token number">6.06</span><span class="token punctuation">,</span>  weight<span class="token operator">:</span> <span class="token string">"164g"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="9">  <span class="token constant">GALAXY_S22</span><span class="token operator">:</span> <span class="token punctuation">{</span>displaySize<span class="token operator">:</span>   <span class="token number">6.1</span><span class="token punctuation">,</span>   weight<span class="token operator">:</span> <span class="token string">"168g"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="10"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p>Since the function returns <code>T</code> type which extends <code>SMARTPHONE_MAP_TYPE</code>,
we can have strict type checking.
And since the function returns <code>arg</code> which is of <code>T</code> type,
not <code>SMARTPHONE_MAP_TYPE</code>, the returned value has information what is inside itself.</p>
<p><img src="/img/2022-03-26-ts-satisfies-keyword/strict-type-checking.png" alt="strict-type-checking"></p>
<p><img src="/img/2022-03-26-ts-satisfies-keyword/autocomplete.png" alt="autocomplete"></p>
<p>Now we have both strict type checking and autocompletion. :)</p>
<p>However, this solution is a little bit tedious with <strong>runtime overhead</strong> due to <code>asType</code> function calls.
Luckily, Typescript is going to introduce <code>satisfies</code> keyword
in the near future, <del>maybe in <code>4.7</code> version.</del></p>
<blockquote>
<p>⚠️ 09/04/2022 Update<br>
<code>satisfies</code> keyword PR finally got merged in main brnach (<a href="https://github.com/microsoft/TypeScript/pull/46827">PR link</a>)
and is expected to be released in <code>4.9</code> version. Check their <a href="https://github.com/microsoft/TypeScript/issues/50457">iteration plan</a> for more information.</p>
</blockquote>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">SMARTPHONE_MAP_TYPE</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">{</span>displaySize<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> weight<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">const</span> <span class="token constant">SMARTPHONE_MAPPING</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4">  <span class="token constant">IPHONE_12</span> <span class="token operator">:</span> <span class="token punctuation">{</span>displaySize<span class="token operator">:</span>   <span class="token number">6.06</span><span class="token punctuation">,</span>  weight<span class="token operator">:</span> <span class="token string">"164g"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="5">  <span class="token constant">GALAXY_S22</span><span class="token operator">:</span> <span class="token punctuation">{</span>displaySize<span class="token operator">:</span>   <span class="token number">6.1</span><span class="token punctuation">,</span>   weight<span class="token operator">:</span> <span class="token string">"168g"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="6"><span class="token punctuation">}</span> satisfies <span class="token constant">SMARTPHONE_MAP_TYPE</span><span class="token punctuation">;</span>
</span></code></pre>
<p>Check out the related Github issue on Typescript repository for more.
<a href="https://github.com/microsoft/TypeScript/issues/47920">[Link]</a></p><!-- HTML_TAG_END --></main></div></div> <footer class="p-2 py-5 text-sm flex gap-1 flex-col md:flex-row items-center justify-between border-t border-gray-300 bg-gray-50 dark:border-gray-700 dark:bg-[#2c3039]"><div>©️ 2021~2023 dlguswo333; All rights reserved.</div> <div class="flex items-center"><a class="inline-flex items-center" href="https://github.com/dlguswo333/dlguswo333.github.io"><img class="inline h-4 w-4 mr-1" src="/github-mark.svg" alt="github-mark"></a>
    Built with Sveltekit.</div></footer>  
			
			<script>
				{
					__sveltekit_d7bf8 = {
						base: new URL("../..", location).pathname.slice(0, -1),
						env: {}
					};

					const element = document.currentScript.parentElement;

					const data = [null,{"type":"data","data":{html:"\u003Cp>With Typescript, you can do strict type checking at compile time or before,\nthanks to Typescript's features and help from IDE.\u003C/p>\n\u003C!--more-->\n\u003Cp>Let us say we want to define an object having\nproperties of smartphones.\nWe can achieve it like the code below:\u003C/p>\n\u003Cpre class=\"language-ts\">\u003Ccode class=\"language-ts code-highlight\">\u003Cspan class=\"code-line line-number\" line=\"1\">\u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token constant\">SMARTPHONE_MAPPING\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"2\">  \u003Cspan class=\"token constant\">IPHONE_12\u003C/span> \u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>displaySize\u003Cspan class=\"token operator\">:\u003C/span>   \u003Cspan class=\"token number\">6.06\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>  weight\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"164g\"\u003C/span>\u003Cspan class=\"token punctuation\">}\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"3\">  \u003Cspan class=\"token constant\">GALAXY_S22\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>displaySize\u003Cspan class=\"token operator\">:\u003C/span>   \u003Cspan class=\"token number\">6.1\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>   weight\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"168g\"\u003C/span>\u003Cspan class=\"token punctuation\">}\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"4\">\u003Cspan class=\"token punctuation\">}\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Of course, there are numerous phones out there,\nso we might add more phones later on. Also,\nwe do not know what names those phone will be called,\nso \u003Ccode>SMARTPHONE_MAPPING\u003C/code> would have arbitrary random keys.\u003C/p>\n\u003Cp>But while adding more phones, we do not want to introduce any errors,\nsuch as usual \u003Cem>\u003Cstrong>developer errors\u003C/strong>\u003C/em> like below:\u003C/p>\n\u003Cpre class=\"language-ts\">\u003Ccode class=\"language-ts code-highlight\">\u003Cspan class=\"code-line line-number\" line=\"1\">\u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token constant\">SMARTPHONE_MAPPING\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"2\">  \u003Cspan class=\"token constant\">IPHONE_12\u003C/span> \u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>displaySize\u003Cspan class=\"token operator\">:\u003C/span>   \u003Cspan class=\"token number\">6.06\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>  weight\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"164g\"\u003C/span>\u003Cspan class=\"token punctuation\">}\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"3\">  \u003Cspan class=\"token constant\">GALAXY_S22\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>displaySize\u003Cspan class=\"token operator\">:\u003C/span>   \u003Cspan class=\"token number\">6.1\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>   weight\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"168g\"\u003C/span>\u003Cspan class=\"token punctuation\">}\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"4\">  \u003Cspan class=\"token constant\">IPHONE_13\u003C/span> \u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>dispaylSize\u003Cspan class=\"token operator\">:\u003C/span>   \u003Cspan class=\"token number\">7\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>     weight\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"150g\"\u003C/span>\u003Cspan class=\"token punctuation\">}\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token comment\">// key typo\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"5\">  \u003Cspan class=\"token constant\">GALAXY_S23\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>displaySize\u003Cspan class=\"token operator\">:\u003C/span>   \u003Cspan class=\"token number\">7\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>                   \u003Cspan class=\"token punctuation\">}\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token comment\">// missing key\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"6\">\u003Cspan class=\"token punctuation\">}\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003C/span>\u003C/code>\u003C/pre>\n\u003Cbr>\n\u003Cp>What we want inside \u003Ccode>SMARTPHONE_MAPPING\u003C/code> are nothing but\ndisplay size and weight properties only.\nHow do we ensure that the values in the object are of the type?\nWell, we can give a type to the object, like below:\u003C/p>\n\u003Cpre class=\"language-ts\">\u003Ccode class=\"language-ts code-highlight\">\u003Cspan class=\"code-line line-number\" line=\"1\">\u003Cspan class=\"token keyword\">type\u003C/span> \u003Cspan class=\"token class-name\">\u003Cspan class=\"token constant\">SMARTPHONE_MAP_TYPE\u003C/span>\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>key\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">string\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>displaySize\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> weight\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">string\u003C/span>\u003Cspan class=\"token punctuation\">}\u003C/span>\u003Cspan class=\"token punctuation\">}\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"2\">\u003Cspan class=\"token comment\">// Or we can defind the type as Record.\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"3\">\u003Cspan class=\"token comment\">// type SMARTPHONE_MAP_TYPE = Record&#x3C;string, {displaySize: number, weight: string}}>\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"4\">\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"5\">\u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token constant\">SMARTPHONE_MAPPING\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token constant\">SMARTPHONE_MAP_TYPE\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"6\">  \u003Cspan class=\"token constant\">IPHONE_12\u003C/span> \u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>displaySize\u003Cspan class=\"token operator\">:\u003C/span>   \u003Cspan class=\"token number\">6.06\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>  weight\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"164g\"\u003C/span>\u003Cspan class=\"token punctuation\">}\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"7\">  \u003Cspan class=\"token constant\">GALAXY_S22\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>displaySize\u003Cspan class=\"token operator\">:\u003C/span>   \u003Cspan class=\"token number\">6.1\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>   weight\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"168g\"\u003C/span>\u003Cspan class=\"token punctuation\">}\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"8\">\u003Cspan class=\"token punctuation\">}\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003C/span>\u003C/code>\u003C/pre>\n\u003Cbr>\n\u003Cp>But the problem of giving the object a type is that\nIDE now does not show us the autocomplete of the member keys.\u003C/p>\n\u003Cp>\u003Cimg src=\"/img/2022-03-26-ts-satisfies-keyword/with-autocomplete.png\" alt=\"with-autocomplete\">\u003C/p>\n\u003Cp>\u003Cstrong>Before Having explicit type\u003C/strong>\n\u003Cbr>\u003Cbr>\u003C/p>\n\u003Cp>\u003Cimg src=\"/img/2022-03-26-ts-satisfies-keyword/without-autocomplete.png\" alt=\"without-autocomplete\">\u003C/p>\n\u003Cp>\u003Cstrong>After Having explicit type\u003C/strong>\n\u003Cbr>\u003Cbr>\u003C/p>\n\u003Cp>Well, why does this happen?\nThis is because the type of the variable is \u003Ccode>SMARTPHONE_MAP_TYPE\u003C/code>,\nwhere there is no information about what is in the object.\n\u003Cstrong>All the information about what's inside the variable\nhas been deprecated.\u003C/strong> All it knows about the keys is that\nthey are string type. Please take a look at the type hints\nand find out what are the differences.\u003C/p>\n\u003Cp>\u003Cimg src=\"/img/2022-03-26-ts-satisfies-keyword/without-type.png\" alt=\"without-type\">\u003C/p>\n\u003Cp>\u003Cstrong>Before Having explicit type\u003C/strong>\n\u003Cbr>\u003Cbr>\u003C/p>\n\u003Cp>\u003Cimg src=\"/img/2022-03-26-ts-satisfies-keyword/with-type.png\" alt=\"with-type\">\u003C/p>\n\u003Cp>\u003Cstrong>After Having explicit type\u003C/strong>\n\u003Cbr>\u003Cbr>\u003C/p>\n\u003Cp>\u003Ccode>SMARTPHONE_MAP_TYPE\u003C/code> does not contain any information about\nwhat are members but only that the keys are in string,\nand the values are in object containing the two properties.\u003C/p>\n\u003Cp>\u003Ccode>SMARTPHONE_MAPPING\u003C/code> does know the member keys, but\ngiving the explicit type to the object made it\nblind about what is inside the object.\u003C/p>\n\u003Ch2>Solution\u003C/h2>\n\u003Cp>To solve this, we can implement a generic function\nwhich accepts \u003Ccode>arg\u003C/code> which extends \u003Ccode>SMARTPHONE_MAP_TYPE\u003C/code>,\nand returns \u003Ccode>arg\u003C/code> as is. See \u003Ccode>asType\u003C/code> function below:\u003C/p>\n\u003Cpre class=\"language-ts\">\u003Ccode class=\"language-ts code-highlight\">\u003Cspan class=\"code-line line-number\" line=\"1\">\u003Cspan class=\"token keyword\">type\u003C/span> \u003Cspan class=\"token class-name\">\u003Cspan class=\"token constant\">SMARTPHONE_MAP_TYPE\u003C/span>\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>key\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">string\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>displaySize\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> weight\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">string\u003C/span>\u003Cspan class=\"token punctuation\">}\u003C/span>\u003Cspan class=\"token punctuation\">}\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"2\">\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"3\">\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token generic-function\">\u003Cspan class=\"token function\">asType\u003C/span>\u003Cspan class=\"token generic class-name\">\u003Cspan class=\"token operator\">&#x3C;\u003C/span>\u003Cspan class=\"token constant\">T\u003C/span> \u003Cspan class=\"token keyword\">extends\u003C/span> \u003Cspan class=\"token constant\">SMARTPHONE_MAP_TYPE\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>arg\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token constant\">T\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token constant\">T\u003C/span>\u003Cspan class=\"token punctuation\">{\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"4\">  \u003Cspan class=\"token keyword\">return\u003C/span> arg\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"5\">\u003Cspan class=\"token punctuation\">}\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"6\">\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"7\">\u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token constant\">SMARTPHONE_MAPPING\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">asType\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">{\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"8\">  \u003Cspan class=\"token constant\">IPHONE_12\u003C/span> \u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>displaySize\u003Cspan class=\"token operator\">:\u003C/span>   \u003Cspan class=\"token number\">6.06\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>  weight\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"164g\"\u003C/span>\u003Cspan class=\"token punctuation\">}\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"9\">  \u003Cspan class=\"token constant\">GALAXY_S22\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>displaySize\u003Cspan class=\"token operator\">:\u003C/span>   \u003Cspan class=\"token number\">6.1\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>   weight\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"168g\"\u003C/span>\u003Cspan class=\"token punctuation\">}\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"10\">\u003Cspan class=\"token punctuation\">}\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Since the function returns \u003Ccode>T\u003C/code> type which extends \u003Ccode>SMARTPHONE_MAP_TYPE\u003C/code>,\nwe can have strict type checking.\nAnd since the function returns \u003Ccode>arg\u003C/code> which is of \u003Ccode>T\u003C/code> type,\nnot \u003Ccode>SMARTPHONE_MAP_TYPE\u003C/code>, the returned value has information what is inside itself.\u003C/p>\n\u003Cp>\u003Cimg src=\"/img/2022-03-26-ts-satisfies-keyword/strict-type-checking.png\" alt=\"strict-type-checking\">\u003C/p>\n\u003Cp>\u003Cimg src=\"/img/2022-03-26-ts-satisfies-keyword/autocomplete.png\" alt=\"autocomplete\">\u003C/p>\n\u003Cp>Now we have both strict type checking and autocompletion. :)\u003C/p>\n\u003Cp>However, this solution is a little bit tedious with \u003Cstrong>runtime overhead\u003C/strong> due to \u003Ccode>asType\u003C/code> function calls.\nLuckily, Typescript is going to introduce \u003Ccode>satisfies\u003C/code> keyword\nin the near future, \u003Cdel>maybe in \u003Ccode>4.7\u003C/code> version.\u003C/del>\u003C/p>\n\u003Cblockquote>\n\u003Cp>⚠️ 09/04/2022 Update\u003Cbr>\n\u003Ccode>satisfies\u003C/code> keyword PR finally got merged in main brnach (\u003Ca href=\"https://github.com/microsoft/TypeScript/pull/46827\">PR link\u003C/a>)\nand is expected to be released in \u003Ccode>4.9\u003C/code> version. Check their \u003Ca href=\"https://github.com/microsoft/TypeScript/issues/50457\">iteration plan\u003C/a> for more information.\u003C/p>\n\u003C/blockquote>\n\u003Cpre class=\"language-ts\">\u003Ccode class=\"language-ts code-highlight\">\u003Cspan class=\"code-line line-number\" line=\"1\">\u003Cspan class=\"token keyword\">type\u003C/span> \u003Cspan class=\"token class-name\">\u003Cspan class=\"token constant\">SMARTPHONE_MAP_TYPE\u003C/span>\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>key\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">string\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>displaySize\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> weight\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">string\u003C/span>\u003Cspan class=\"token punctuation\">}\u003C/span>\u003Cspan class=\"token punctuation\">}\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"2\">\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"3\">\u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token constant\">SMARTPHONE_MAPPING\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"4\">  \u003Cspan class=\"token constant\">IPHONE_12\u003C/span> \u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>displaySize\u003Cspan class=\"token operator\">:\u003C/span>   \u003Cspan class=\"token number\">6.06\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>  weight\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"164g\"\u003C/span>\u003Cspan class=\"token punctuation\">}\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"5\">  \u003Cspan class=\"token constant\">GALAXY_S22\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>displaySize\u003Cspan class=\"token operator\">:\u003C/span>   \u003Cspan class=\"token number\">6.1\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>   weight\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"168g\"\u003C/span>\u003Cspan class=\"token punctuation\">}\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"6\">\u003Cspan class=\"token punctuation\">}\u003C/span> satisfies \u003Cspan class=\"token constant\">SMARTPHONE_MAP_TYPE\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Check out the related Github issue on Typescript repository for more.\n\u003Ca href=\"https://github.com/microsoft/TypeScript/issues/47920\">[Link]\u003C/a>\u003C/p>",frontmatter:{layout:"post",toc:false,editedDate:"2022-09-22",title:"Typescript satisfies keyword",category:["Programming"],tags:["typescript","javascript"],author:["이현재"]},date:"2022-03-26",lang:"en",tocData:[]},"uses":{"params":["year","slug"]}}];

					Promise.all([
						import("../../_app/immutable/entry/start.163bd52d.js"),
						import("../../_app/immutable/entry/app.fd85d4b9.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 5],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
