<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="../../favicon.ico" />
		<meta name="viewport" content="width=device-width" />
		
		<link href="../../_app/immutable/assets/0.df00206b.css" rel="stylesheet">
		<link rel="modulepreload" href="../../_app/immutable/entry/start.c774d2ab.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/scheduler.db0ac06a.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/singletons.e644d3f4.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.1bcf888f.js">
		<link rel="modulepreload" href="../../_app/immutable/entry/app.878f2773.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.22365a7a.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/0.42888e61.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.a82faf3f.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/store.6cfcb23f.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/5.d0a40158.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/each.e59479a4.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/Category.c6d120e2.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/MainSection.aed08602.js"><title>Determining HEVC (H.265) Support On Web Browser : dlguswo333&#39;s blog</title><!-- HEAD_svelte-etxm8u_START --><!-- HEAD_svelte-etxm8u_END -->
		<title>dlguswo333's Blog</title>
	</head>
	<body data-sveltekit-preload-data="hover">
		<div id="root">  <header class="p-2 sticky top-0 flex flex-row items-center justify-between border-b border-b-gray-300 bg-gray-50"><div><a href="/" class="inline-block h-8 w-8" data-svelte-h="svelte-htzscq"><span class="hidden">Go To Home</span> <img src="/favicon.svg" alt="Logo"></a> </div> <div class="flex flex-row items-center"><a href="/categories" class="h-8 flex items-center justify-center mr-2 last:mr-1 px-1 py-0.5 rounded-s hover:bg-gray-200">Categories</a> <a href="/tags" class="h-8 flex items-center justify-center mr-2 last:mr-1 px-1 py-0.5 rounded-s hover:bg-gray-200">Tags</a> <a href="/about" class="h-8 flex items-center justify-center mr-2 last:mr-1 px-1 py-0.5 rounded-s hover:bg-gray-200">About</a></div></header>  <div class="flex flex-row flex-grow justify-center p-2 lg:p-0 lg:pr-[300px]"> <aside class="w-[300px] overflow-hidden hidden mt-10 self-start md:!flex md:sticky md:top-14 flex-col justify-center items-center p-3
  "><ul class="w-full max-h-[80vh] overflow-auto"><li title="1. Abstraction" class="flex border-l-4 border-transparent hover:border-gray-300 hover:bg-gray-50 font-bold  
        " style="padding-left: 0.3rem;"><a href="#1-1.-Abstraction" class="whitespace-nowrap overflow-hidden break-all overflow-ellipsis flex-grow">1. Abstraction</a> </li><li title="2. Introduction" class="flex border-l-4 border-transparent hover:border-gray-300 hover:bg-gray-50 font-bold  
        " style="padding-left: 0.3rem;"><a href="#2-2.-Introduction" class="whitespace-nowrap overflow-hidden break-all overflow-ellipsis flex-grow">2. Introduction</a> </li><li title="3. Why codecs=&quot;hvc1&quot; doesn't work on Chromium" class="flex border-l-4 border-transparent hover:border-gray-300 hover:bg-gray-50 font-bold  
        " style="padding-left: 0.3rem;"><a href="#3-3.-Why-codecs=hvc1-doesnt-work-on-Chromium" class="whitespace-nowrap overflow-hidden break-all overflow-ellipsis flex-grow">3. Why codecs="hvc1" doesn't work on Chromium</a> </li><li title="4. Solution" class="flex border-l-4 border-transparent hover:border-gray-300 hover:bg-gray-50 font-bold  
        " style="padding-left: 0.3rem;"><a href="#4-4.-Solution" class="whitespace-nowrap overflow-hidden break-all overflow-ellipsis flex-grow">4. Solution</a> </li></ul></aside>  <div class="flex flex-col justify-center min-w-0"><div class="max-w-[900px] flex flex-col items-center py-6 gap-3"><h1 class="text-4xl font-bold text-center">Determining HEVC (H.265) Support On Web Browser</h1> <span>2023-01-12 (Edited 2023-04-04)</span> <button class="px-2 py-0.5 rounded-lg shadow-md shadow-emerald-50 border-l-slate-100 bg-sky-300 text-white hover:bg-sky-500 transition">/Programming</button> <div><button class="last:mr-0 bg-green-100 hover:bg-green-400 hover:text-white transition px-2 py-0.5 rounded-xl shadow-md" style="margin-right: 0.25rem; margin-left: 0.5rem">#web</button><button class="last:mr-0 bg-green-100 hover:bg-green-400 hover:text-white transition px-2 py-0.5 rounded-xl shadow-md" style="margin-right: 0.25rem; margin-left: 0rem">#javascript</button></div></div> <hr class="bg-gray-400 my-4">  <main class="max-w-[900px] w-full py-2 post"> <!-- HTML_TAG_START --><p align="center">
  <img height="50" src="https://www.chromium.org/_assets/customLogo.png" alt="chromium-logo">
</p>
<h1 id="1-1.-Abstraction">1. Abstraction</h1>
<p>We are going to learn how to determine whether a device
supports HEVC videos on Web Browser, mainly recent versions of Chromium.</p>
<!--more-->
<h1 id="2-2.-Introduction">2. Introduction</h1>
<p>On recent releases of Chromium, starting from version 107,
HEVC, H.265 video format is being supported.</p>
<p><img src="/img/2023-01-12-determining-hevc-support-on-web-browser/caniuse-hevc.png" alt="caniuse-hevc"></p>
<p>In detail, HEVC videos are playable if you are using chromium 107 or later,
and Windows 8 or later, or Big Sur if you are on Mac, or Chromium > 108
if you are on Linux, and <strong>with Hardware Support</strong>.
Check out <a href="https://caniuse.com/?search=hevc">https://caniuse.com/?search=hevc</a> if you want to see it by yourself.
Also, you can check if your browsers can play HEVC videos in the link:
<a href="https://cconcolato.github.io/media-mime-support/#other_video_codecs">https://cconcolato.github.io/media-mime-support/#other_video_codecs</a></p>
<p>It's quite surprising to see Chromium support started very recently
considering that HEVC videos has become ubiquitous and most devices
have started supporting HEVC natively for more than half a decade.</p>
<p>Anyway, to provide Web users with the best quality videos,
Web developers might want to provide H.265 videos over
H.264 ones for those who are qualified.
But Also, you need to provide fallback H.264 videos for those who are not qualified.</p>
<p>You may think of a <code>video</code> element with several <code>source</code> elements inside.</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line line-number" line="1"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>video</span><span class="token punctuation">></span></span>
</span><span class="code-line line-number" line="2">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>source</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/h265.mp4<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video/mp4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
</span><span class="code-line line-number" line="3">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>source</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/h264.mp4<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video/mp4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
</span><span class="code-line line-number" line="4"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>video</span><span class="token punctuation">></span></span>
</span></code></pre>
<p>If you specify HEVC video source first, Web Browser will try to show the HEVC video
first, then H.264 video.
<strong>However</strong>, if you test on devices without HEVC support,
you might witness that it malfunctions, showing the HEVC video,
on recent Chromium browsers.</p>
<p>This is because you did not provide detailed <code>type</code> of the video.
Web browsers, at least Chromiums, do not know or care whether
a video file is actually playable or not.
You need to specify what <code>codecs</code> the video is encoded with.
Thus, you need to find a way to specify HEVC codecs.</p>
<p>Most of online resources tell you that
you can put <code>codecs="hvc1"</code>, like below.</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line line-number" line="1"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>source</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/h265.mp4<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>video/mp4; codecs="hvc1"<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>
</span></code></pre>
<blockquote>
<p><strong>NOTE</strong> You can alternatively use <code>type="video/mp4; codecs=&#x26;quot;hvc1&#x26;quot"</code>
If you want to wrap the string inside double quotes.</p>
</blockquote>
<p>...or <code>codecs="hev1"</code>. <code>hvc</code> and <code>hev</code> are synonyms, at least
in the world of <code>source</code> elements.</p>
<p>However, <strong>this is again wrong</strong>. Test the following JavaScript code on Chromium browsers
with HEVC support.</p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">const</span> video <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">'video'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>video<span class="token punctuation">.</span><span class="token method function property-access">canPlayType</span><span class="token punctuation">(</span><span class="token string">'video/mp4; codecs="hvc1"'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></code></pre>
<p>On Chrome 108, it logs an empty string <code>''</code> meaning that the browser cannot play
that type of videos.
However, On Safari on Monterey M1 Mac, it shows <code>'probably'</code>!
Why does this happen?</p>
<h1 id="3-3.-Why-codecs=hvc1-doesnt-work-on-Chromium">3. Why <code>codecs="hvc1"</code> doesn't work on Chromium</h1>
<p>This is because Chromium's intention to strictly oppose
using ambiguous codec identifiers for HEVC.
Refer to Chromium's test code on <code>canPlayType</code>.
As you can see from the link, this is source code of Chromium 108.</p>
<p><a href="https://chromium.googlesource.com/chromium/src/+/refs/tags/108.0.5359.181/content/test/data/media/canplaytype_test.js">https://chromium.googlesource.com/chromium/src/+/refs/tags/108.0.5359.181/content/test/data/media/canplaytype_test.js</a></p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// Copyright 2020 The Chromium Authors</span>
</span><span class="code-line line-number" line="2"><span class="token comment">// Use of this source code is governed by a BSD-style license that can be</span>
</span><span class="code-line line-number" line="3"><span class="token comment">// found in the LICENSE file.</span>
</span><span class="code-line line-number" line="4"><span class="token spread operator">...</span>
</span><span class="code-line line-number" line="5"><span class="token comment">// Don't allow incomplete/ambiguous codec ids for HEVC.</span>
</span><span class="code-line line-number" line="6"><span class="token comment">// Codec string must have info about codec level/profile, as described in</span>
</span><span class="code-line line-number" line="7"><span class="token comment">// ISO/IEC FDIS 14496-15 section E.3, for example "hev1.1.6.L93.B0"</span>
</span><span class="code-line line-number" line="8"><span class="token string">'hev1'</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="9"><span class="token string">'hvc1'</span><span class="token punctuation">,</span>
</span></code></pre>
<p>This clearly shows that Chromium outputs an empty string to suppress the use of
incomplete codecs identifiers. There are numerous codecs and profiles within HEVC.
Saying <code>probably</code> on ambiguous specifications may result in unintended errors.
What if the device does support HEVC 8 bit depth videos
but not HEVC 10 bit depth videos?
What if the video resolution is so huge, like 8K (<em>7680x4320</em>)?
Does every device with H.265 support support that large resolution?</p>
<p>Therefore, in order to <em>correctly</em> determine whether a device supports your videos,
it's safe to specify the detailed codecs.
This philosophy has been applied way back, at least Chromium 62.</p>
<p><a href="https://chromium.googlesource.com/chromium/src.git/+/62.0.3178.1/content/browser/media/media_canplaytype_browsertest.cc">https://chromium.googlesource.com/chromium/src.git/+/62.0.3178.1/content/browser/media/media_canplaytype_browsertest.cc</a></p>
<h1 id="4-4.-Solution">4. Solution</h1>
<p>Therefore, Find the exact codecs your videos are encoded with.
If you don't know what codecs your videos use or
it's just because you are too lazy for this,
pick a codec that is absurdly high so that if a device support
that high-end codec, it's absolutely nonsense that
the device does not support your videos.</p>
<p>There are some codec identifier examples on <a href="https://dashif.org/codecs/video/">https://dashif.org/codecs/video/</a>.
They are the organization to help build MPEG standards and
create interoperability guidelines.
It consists of well-known companies, such as Microsoft and Google.
I would pick <code>hvc1.2.4.L153.B0</code> to 99.9% make sure
that browsers support your HEVC videos.</p>
<p>By the way, there is another powerful JavaScript API you can use to
get detailed codec support information
with which you can specify content type, resolutions,
and even bitrate called <code>Media Capabilities</code>.</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Media_Capabilities_API">https://developer.mozilla.org/en-US/docs/Web/API/Media_Capabilities_API</a></p><!-- HTML_TAG_END --></main></div></div> <footer class="p-2 py-5 text-sm flex gap-1 flex-col md:flex-row items-center justify-between border-t border-b-gray-300 bg-gray-50"><div>©️ 2021~2023 dlguswo333; All rights reserved.</div> <div class="flex items-center" data-svelte-h="svelte-egte91"><a class="inline-flex items-center" href="https://github.com/dlguswo333/dlguswo333.github.io"><img class="inline h-4 w-4 mr-1" src="/github-mark.svg" alt="github-mark"></a>
    Built with Sveltekit.</div></footer>  
			
			<script>
				{
					__sveltekit_w1l6gr = {
						base: new URL("../..", location).pathname.slice(0, -1),
						env: {}
					};

					const element = document.currentScript.parentElement;

					const data = [null,{"type":"data","data":{html:"\u003Cp align=\"center\">\n  \u003Cimg height=\"50\" src=\"https://www.chromium.org/_assets/customLogo.png\" alt=\"chromium-logo\">\n\u003C/p>\n\u003Ch1 id=\"1-1.-Abstraction\">1. Abstraction\u003C/h1>\n\u003Cp>We are going to learn how to determine whether a device\nsupports HEVC videos on Web Browser, mainly recent versions of Chromium.\u003C/p>\n\u003C!--more-->\n\u003Ch1 id=\"2-2.-Introduction\">2. Introduction\u003C/h1>\n\u003Cp>On recent releases of Chromium, starting from version 107,\nHEVC, H.265 video format is being supported.\u003C/p>\n\u003Cp>\u003Cimg src=\"/img/2023-01-12-determining-hevc-support-on-web-browser/caniuse-hevc.png\" alt=\"caniuse-hevc\">\u003C/p>\n\u003Cp>In detail, HEVC videos are playable if you are using chromium 107 or later,\nand Windows 8 or later, or Big Sur if you are on Mac, or Chromium > 108\nif you are on Linux, and \u003Cstrong>with Hardware Support\u003C/strong>.\nCheck out \u003Ca href=\"https://caniuse.com/?search=hevc\">https://caniuse.com/?search=hevc\u003C/a> if you want to see it by yourself.\nAlso, you can check if your browsers can play HEVC videos in the link:\n\u003Ca href=\"https://cconcolato.github.io/media-mime-support/#other_video_codecs\">https://cconcolato.github.io/media-mime-support/#other_video_codecs\u003C/a>\u003C/p>\n\u003Cp>It's quite surprising to see Chromium support started very recently\nconsidering that HEVC videos has become ubiquitous and most devices\nhave started supporting HEVC natively for more than half a decade.\u003C/p>\n\u003Cp>Anyway, to provide Web users with the best quality videos,\nWeb developers might want to provide H.265 videos over\nH.264 ones for those who are qualified.\nBut Also, you need to provide fallback H.264 videos for those who are not qualified.\u003C/p>\n\u003Cp>You may think of a \u003Ccode>video\u003C/code> element with several \u003Ccode>source\u003C/code> elements inside.\u003C/p>\n\u003Cpre class=\"language-html\">\u003Ccode class=\"language-html code-highlight\">\u003Cspan class=\"code-line line-number\" line=\"1\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;\u003C/span>video\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"2\">    \u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;\u003C/span>source\u003C/span> \u003Cspan class=\"token attr-name\">src\u003C/span>\u003Cspan class=\"token attr-value\">\u003Cspan class=\"token punctuation attr-equals\">=\u003C/span>\u003Cspan class=\"token punctuation\">\"\u003C/span>/h265.mp4\u003Cspan class=\"token punctuation\">\"\u003C/span>\u003C/span> \u003Cspan class=\"token attr-name\">type\u003C/span>\u003Cspan class=\"token attr-value\">\u003Cspan class=\"token punctuation attr-equals\">=\u003C/span>\u003Cspan class=\"token punctuation\">\"\u003C/span>video/mp4\u003Cspan class=\"token punctuation\">\"\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"3\">    \u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;\u003C/span>source\u003C/span> \u003Cspan class=\"token attr-name\">src\u003C/span>\u003Cspan class=\"token attr-value\">\u003Cspan class=\"token punctuation attr-equals\">=\u003C/span>\u003Cspan class=\"token punctuation\">\"\u003C/span>/h264.mp4\u003Cspan class=\"token punctuation\">\"\u003C/span>\u003C/span> \u003Cspan class=\"token attr-name\">type\u003C/span>\u003Cspan class=\"token attr-value\">\u003Cspan class=\"token punctuation attr-equals\">=\u003C/span>\u003Cspan class=\"token punctuation\">\"\u003C/span>video/mp4\u003Cspan class=\"token punctuation\">\"\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"4\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;/\u003C/span>video\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>If you specify HEVC video source first, Web Browser will try to show the HEVC video\nfirst, then H.264 video.\n\u003Cstrong>However\u003C/strong>, if you test on devices without HEVC support,\nyou might witness that it malfunctions, showing the HEVC video,\non recent Chromium browsers.\u003C/p>\n\u003Cp>This is because you did not provide detailed \u003Ccode>type\u003C/code> of the video.\nWeb browsers, at least Chromiums, do not know or care whether\na video file is actually playable or not.\nYou need to specify what \u003Ccode>codecs\u003C/code> the video is encoded with.\nThus, you need to find a way to specify HEVC codecs.\u003C/p>\n\u003Cp>Most of online resources tell you that\nyou can put \u003Ccode>codecs=\"hvc1\"\u003C/code>, like below.\u003C/p>\n\u003Cpre class=\"language-html\">\u003Ccode class=\"language-html code-highlight\">\u003Cspan class=\"code-line line-number\" line=\"1\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;\u003C/span>source\u003C/span> \u003Cspan class=\"token attr-name\">src\u003C/span>\u003Cspan class=\"token attr-value\">\u003Cspan class=\"token punctuation attr-equals\">=\u003C/span>\u003Cspan class=\"token punctuation\">\"\u003C/span>/h265.mp4\u003Cspan class=\"token punctuation\">\"\u003C/span>\u003C/span> \u003Cspan class=\"token attr-name\">type\u003C/span>\u003Cspan class=\"token attr-value\">\u003Cspan class=\"token punctuation attr-equals\">=\u003C/span>\u003Cspan class=\"token punctuation\">'\u003C/span>video/mp4; codecs=\"hvc1\"\u003Cspan class=\"token punctuation\">'\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003C/code>\u003C/pre>\n\u003Cblockquote>\n\u003Cp>\u003Cstrong>NOTE\u003C/strong> You can alternatively use \u003Ccode>type=\"video/mp4; codecs=&#x26;quot;hvc1&#x26;quot\"\u003C/code>\nIf you want to wrap the string inside double quotes.\u003C/p>\n\u003C/blockquote>\n\u003Cp>...or \u003Ccode>codecs=\"hev1\"\u003C/code>. \u003Ccode>hvc\u003C/code> and \u003Ccode>hev\u003C/code> are synonyms, at least\nin the world of \u003Ccode>source\u003C/code> elements.\u003C/p>\n\u003Cp>However, \u003Cstrong>this is again wrong\u003C/strong>. Test the following JavaScript code on Chromium browsers\nwith HEVC support.\u003C/p>\n\u003Cpre class=\"language-js\">\u003Ccode class=\"language-js code-highlight\">\u003Cspan class=\"code-line line-number\" line=\"1\">\u003Cspan class=\"token keyword\">const\u003C/span> video \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token dom variable\">document\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token method function property-access\">createElement\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">'video'\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"2\">\u003Cspan class=\"token console class-name\">console\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token method function property-access\">log\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>video\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token method function property-access\">canPlayType\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">'video/mp4; codecs=\"hvc1\"'\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\n\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>On Chrome 108, it logs an empty string \u003Ccode>''\u003C/code> meaning that the browser cannot play\nthat type of videos.\nHowever, On Safari on Monterey M1 Mac, it shows \u003Ccode>'probably'\u003C/code>!\nWhy does this happen?\u003C/p>\n\u003Ch1 id=\"3-3.-Why-codecs=hvc1-doesnt-work-on-Chromium\">3. Why \u003Ccode>codecs=\"hvc1\"\u003C/code> doesn't work on Chromium\u003C/h1>\n\u003Cp>This is because Chromium's intention to strictly oppose\nusing ambiguous codec identifiers for HEVC.\nRefer to Chromium's test code on \u003Ccode>canPlayType\u003C/code>.\nAs you can see from the link, this is source code of Chromium 108.\u003C/p>\n\u003Cp>\u003Ca href=\"https://chromium.googlesource.com/chromium/src/+/refs/tags/108.0.5359.181/content/test/data/media/canplaytype_test.js\">https://chromium.googlesource.com/chromium/src/+/refs/tags/108.0.5359.181/content/test/data/media/canplaytype_test.js\u003C/a>\u003C/p>\n\u003Cpre class=\"language-js\">\u003Ccode class=\"language-js code-highlight\">\u003Cspan class=\"code-line line-number\" line=\"1\">\u003Cspan class=\"token comment\">// Copyright 2020 The Chromium Authors\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"2\">\u003Cspan class=\"token comment\">// Use of this source code is governed by a BSD-style license that can be\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"3\">\u003Cspan class=\"token comment\">// found in the LICENSE file.\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"4\">\u003Cspan class=\"token spread operator\">...\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"5\">\u003Cspan class=\"token comment\">// Don't allow incomplete/ambiguous codec ids for HEVC.\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"6\">\u003Cspan class=\"token comment\">// Codec string must have info about codec level/profile, as described in\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"7\">\u003Cspan class=\"token comment\">// ISO/IEC FDIS 14496-15 section E.3, for example \"hev1.1.6.L93.B0\"\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"8\">\u003Cspan class=\"token string\">'hev1'\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"9\">\u003Cspan class=\"token string\">'hvc1'\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>This clearly shows that Chromium outputs an empty string to suppress the use of\nincomplete codecs identifiers. There are numerous codecs and profiles within HEVC.\nSaying \u003Ccode>probably\u003C/code> on ambiguous specifications may result in unintended errors.\nWhat if the device does support HEVC 8 bit depth videos\nbut not HEVC 10 bit depth videos?\nWhat if the video resolution is so huge, like 8K (\u003Cem>7680x4320\u003C/em>)?\nDoes every device with H.265 support support that large resolution?\u003C/p>\n\u003Cp>Therefore, in order to \u003Cem>correctly\u003C/em> determine whether a device supports your videos,\nit's safe to specify the detailed codecs.\nThis philosophy has been applied way back, at least Chromium 62.\u003C/p>\n\u003Cp>\u003Ca href=\"https://chromium.googlesource.com/chromium/src.git/+/62.0.3178.1/content/browser/media/media_canplaytype_browsertest.cc\">https://chromium.googlesource.com/chromium/src.git/+/62.0.3178.1/content/browser/media/media_canplaytype_browsertest.cc\u003C/a>\u003C/p>\n\u003Ch1 id=\"4-4.-Solution\">4. Solution\u003C/h1>\n\u003Cp>Therefore, Find the exact codecs your videos are encoded with.\nIf you don't know what codecs your videos use or\nit's just because you are too lazy for this,\npick a codec that is absurdly high so that if a device support\nthat high-end codec, it's absolutely nonsense that\nthe device does not support your videos.\u003C/p>\n\u003Cp>There are some codec identifier examples on \u003Ca href=\"https://dashif.org/codecs/video/\">https://dashif.org/codecs/video/\u003C/a>.\nThey are the organization to help build MPEG standards and\ncreate interoperability guidelines.\nIt consists of well-known companies, such as Microsoft and Google.\nI would pick \u003Ccode>hvc1.2.4.L153.B0\u003C/code> to 99.9% make sure\nthat browsers support your HEVC videos.\u003C/p>\n\u003Cp>By the way, there is another powerful JavaScript API you can use to\nget detailed codec support information\nwith which you can specify content type, resolutions,\nand even bitrate called \u003Ccode>Media Capabilities\u003C/code>.\u003C/p>\n\u003Cp>\u003Ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/Media_Capabilities_API\">https://developer.mozilla.org/en-US/docs/Web/API/Media_Capabilities_API\u003C/a>\u003C/p>",frontmatter:{layout:"post",toc:true,editedDate:"2023-04-04",title:"Determining HEVC (H.265) Support On Web Browser",category:["Programming"],tags:["web","javascript"],author:["이현재"]},date:"2023-01-12",lang:"en",tocData:[{depth:1,id:"1-1.-Abstraction",text:"1. Abstraction"},{depth:1,id:"2-2.-Introduction",text:"2. Introduction"},{depth:1,id:"3-3.-Why-codecs=hvc1-doesnt-work-on-Chromium",text:"3. Why codecs=\"hvc1\" doesn't work on Chromium"},{depth:1,id:"4-4.-Solution",text:"4. Solution"}]},"uses":{"params":["year","slug"]}}];

					Promise.all([
						import("../../_app/immutable/entry/start.c774d2ab.js"),
						import("../../_app/immutable/entry/app.878f2773.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 5],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
