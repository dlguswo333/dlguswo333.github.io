{"type":"data","nodes":[null,{"type":"data","data":[{"html":1,"frontmatter":2,"date":15,"lang":16,"tocData":17},"\u003Cp>Vite is yet another javascript bundler tool similar to Webpack,\nand it's growing rapidly mainly for its faster build performance.\u003C/p>\n\u003C!--more-->\n\u003Cp>You may wonder whether Vite supports all the configurations, plugins and features\nwhich Webpack does. But considering relatively short history of Vite,\nVite's varieties of configs and features are amazing and I have not encountered\na feature that Webpack supports but Vite doesn't.\u003C/p>\n\u003Ch1 id=\"1-You-cannot-Tell-Vite-where-to-Add-Script-Tags\">You cannot Tell Vite where to Add Script Tags\u003C/h1>\n\u003Cp>Nontheless, I have encountered Vite's one flaw that you cannot tell Vite\nwhere to insert \u003Ccode>&#x3C;script>\u003C/code> tags.\u003C/p>\n\u003Cp>Say you have a tag that must appear earilier than any other scripts.\nFor example, a \u003Ccode>&#x3C;base>\u003C/code> tag. You are building a project that must be served\nthrought a proxy domain and you are not able to serve the project on which you want it be.\nSo you inserted the script at the top inside \u003Ccode>&#x3C;head>\u003C/code> tag.\u003C/p>\n\u003Cpre class=\"language-html\">\u003Ccode class=\"language-html code-highlight\">\u003Cspan class=\"code-line line-number\" line=\"1\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;\u003C/span>head\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"2\">    \u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;\u003C/span>base\u003C/span> \u003Cspan class=\"token attr-name\">href\u003C/span>\u003Cspan class=\"token attr-value\">\u003Cspan class=\"token punctuation attr-equals\">=\u003C/span>\u003Cspan class=\"token punctuation\">\"\u003C/span>https://example.com/\u003Cspan class=\"token punctuation\">\"\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>The result is the following.\u003C/p>\n\u003Cpre class=\"language-html\">\u003Ccode class=\"language-html code-highlight\">\u003Cspan class=\"code-line line-number\" line=\"1\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;\u003C/span>head\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"2\">    \u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;\u003C/span>script\u003C/span> \u003Cspan class=\"token attr-name\">type\u003C/span>\u003Cspan class=\"token attr-value\">\u003Cspan class=\"token punctuation attr-equals\">=\u003C/span>\u003Cspan class=\"token punctuation\">\"\u003C/span>module\u003Cspan class=\"token punctuation\">\"\u003C/span>\u003C/span> \u003Cspan class=\"token attr-name\">src\u003C/span>\u003Cspan class=\"token attr-value\">\u003Cspan class=\"token punctuation attr-equals\">=\u003C/span>\u003Cspan class=\"token punctuation\">\"\u003C/span>/@vite/client\u003Cspan class=\"token punctuation\">\"\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\u003Cspan class=\"token script\">\u003C/span>\u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;/\u003C/span>script\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"3\">    \u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;\u003C/span>base\u003C/span> \u003Cspan class=\"token attr-name\">href\u003C/span>\u003Cspan class=\"token attr-value\">\u003Cspan class=\"token punctuation attr-equals\">=\u003C/span>\u003Cspan class=\"token punctuation\">\"\u003C/span>https://example.com/\u003Cspan class=\"token punctuation\">\"\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>This may result in an error, in case the proxy server does not provide \u003Ccode>/@vite/client\u003C/code>\nbut \u003Ccode>https://example.com/\u003C/code> does. Also, this kind of scenarios is not limited to \u003Ccode>&#x3C;base>\u003C/code> tag,\nbut also \u003Ccode>&#x3C;script>\u003C/code> tag and so on.\u003C/p>\n\u003Cp>In this case, you want to prepend your own tag inside \u003Ccode>&#x3C;head>\u003C/code> tag.\nSadly you cannot configure Vite to move it to the position where you want.\nTo put it simply, there is no option you can control the behavior.\u003Cbr>\n\u003Ca href=\"https://github.com/vitejs/vite/discussions/3013\">https://github.com/vitejs/vite/discussions/3013\u003C/a>\u003C/p>\n\u003Ch1 id=\"2-You-can-Define-your-own-HTML-Transform-Plugin\">You can Define your own HTML Transform Plugin\u003C/h1>\n\u003Cp>However, luckily, you may have your own HTML transform Vite plugin\nso that after Vite inserting scripts, you modify index.html as you like.\nAnd you don't need to worry about writing a plugin on your own.\nThis is so easy that all you need to write is ~20 lines of codes.\u003C/p>\n\u003Cp>\u003Ca href=\"https://vitejs.dev/guide/api-plugin.html#transformindexhtml\">https://vitejs.dev/guide/api-plugin.html#transformindexhtml\u003C/a>\u003C/p>\n\u003Cpre class=\"language-js\">\u003Ccode class=\"language-js code-highlight\">\u003Cspan class=\"code-line line-number\" line=\"1\">\u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token function-variable function\">htmlPlugin\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token arrow operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"2\">  \u003Cspan class=\"token keyword control-flow\">return\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"3\">    \u003Cspan class=\"token literal-property property\">name\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">'html-transform'\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"4\">    \u003Cspan class=\"token function\">transformIndexHtml\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token parameter\">html\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"5\">      \u003Cspan class=\"token keyword control-flow\">return\u003C/span> html\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token method function property-access\">replace\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"6\">        \u003Cspan class=\"token regex\">\u003Cspan class=\"token regex-delimiter\">/\u003C/span>\u003Cspan class=\"token regex-source language-regex\">&#x3C;head>\u003C/span>\u003Cspan class=\"token regex-delimiter\">/\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"7\">        \u003Cspan class=\"token template-string\">\u003Cspan class=\"token template-punctuation string\">`\u003C/span>\u003Cspan class=\"token string\">&#x3C;head>&#x3C;base href=\"https://example.com/\">\u003C/span>\u003Cspan class=\"token template-punctuation string\">`\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"8\">      \u003Cspan class=\"token punctuation\">)\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"9\">    \u003Cspan class=\"token punctuation\">}\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"10\">    \u003Cspan class=\"token literal-property property\">order\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">'post'\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"11\">  \u003Cspan class=\"token punctuation\">}\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"12\">\u003Cspan class=\"token punctuation\">}\u003C/span>\n\u003C/span>\u003C/code>\u003C/pre>\n\u003Cpre class=\"language-html\">\u003Ccode class=\"language-html code-highlight\">\u003Cspan class=\"code-line line-number\" line=\"1\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;\u003C/span>head\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"2\">    \u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;\u003C/span>base\u003C/span> \u003Cspan class=\"token attr-name\">href\u003C/span>\u003Cspan class=\"token attr-value\">\u003Cspan class=\"token punctuation attr-equals\">=\u003C/span>\u003Cspan class=\"token punctuation\">\"\u003C/span>https://example.com/\u003Cspan class=\"token punctuation\">\"\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"3\">    \u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;\u003C/span>script\u003C/span> \u003Cspan class=\"token attr-name\">type\u003C/span>\u003Cspan class=\"token attr-value\">\u003Cspan class=\"token punctuation attr-equals\">=\u003C/span>\u003Cspan class=\"token punctuation\">\"\u003C/span>module\u003Cspan class=\"token punctuation\">\"\u003C/span>\u003C/span> \u003Cspan class=\"token attr-name\">src\u003C/span>\u003Cspan class=\"token attr-value\">\u003Cspan class=\"token punctuation attr-equals\">=\u003C/span>\u003Cspan class=\"token punctuation\">\"\u003C/span>/@vite/client\u003Cspan class=\"token punctuation\">\"\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\u003Cspan class=\"token script\">\u003C/span>\u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;/\u003C/span>script\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Happy coding!\u003C/p>",{"layout":3,"toc":4,"math":5,"title":6,"category":7,"tags":9,"author":13},"post",true,false,"Vite: How to Transform HTML as You Like",[8],"Programming",[10,11,12],"web","vite","javascript",[14],"이현재","2023-07-08","eng",[18,22],{"depth":19,"id":20,"text":21},1,"1-You-cannot-Tell-Vite-where-to-Add-Script-Tags","You cannot Tell Vite where to Add Script Tags",{"depth":19,"id":23,"text":24},"2-You-can-Define-your-own-HTML-Transform-Plugin","You can Define your own HTML Transform Plugin"],"uses":{"params":["year","slug"]}}]}
