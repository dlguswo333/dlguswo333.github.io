{"type":"data","nodes":[null,{"type":"data","data":[{"html":1,"frontmatter":2,"date":15,"lang":16,"id":17,"tocData":18,"langs":29},"\u003Ch1 id=\"1-Windows-11-에서의-한글-IME-입력-이슈\">Windows 11 에서의 한글 IME 입력 이슈\u003C/h1>\n\u003Cp>웹앱 개발 중 윈도우 11에서 발생하는 한글 입력 중 마지막 음절이 지워지는 아주 골 때리는 현상을 겪었습니다.\n한글 입력 중 다른 창/탭으로 포커스가 이동하면 입력 중인 글자가 지워지는 것인데요.\n또한 같은 window의 다른 엘리먼트 마우스 클릭으로 인하여 포커스를 잃을 경우에도\n\u003Ccode>'input'\u003C/code> 이벤트가 연달아 두 번 발생하는데, 입력 중인 글자가 지워진 value로 한 번,\n그리고 마지막 글자가 원상 복귀 된 value로 한 번 이렇게 발생합니다.\n다음은 재현을 위한 간단한 HTML 코드 예시입니다.\n동작에 영향을 줄 만한 코드가 없음에도 이슈가 발생하는 것을 확인할 수 있습니다.\u003C/p>\n\u003Cpre class=\"language-html\">\u003Ccode class=\"language-html code-highlight\">\u003Cspan class=\"code-line line-number\" line=\"1\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;\u003C/span>html\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"2\">    \u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;\u003C/span>body\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"3\">      \u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;\u003C/span>input\u003C/span> \u003Cspan class=\"token attr-name\">id\u003C/span>\u003Cspan class=\"token attr-value\">\u003Cspan class=\"token punctuation attr-equals\">=\u003C/span>\u003Cspan class=\"token punctuation\">'\u003C/span>input\u003Cspan class=\"token punctuation\">'\u003C/span>\u003C/span> \u003Cspan class=\"token attr-name\">type\u003C/span>\u003Cspan class=\"token attr-value\">\u003Cspan class=\"token punctuation attr-equals\">=\u003C/span>\u003Cspan class=\"token punctuation\">'\u003C/span>text\u003Cspan class=\"token punctuation\">'\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"4\">      \u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;\u003C/span>div\u003C/span> \u003Cspan class=\"token attr-name\">id\u003C/span>\u003Cspan class=\"token attr-value\">\u003Cspan class=\"token punctuation attr-equals\">=\u003C/span>\u003Cspan class=\"token punctuation\">\"\u003C/span>log\u003Cspan class=\"token punctuation\">\"\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;/\u003C/span>div\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"5\">    \u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;/\u003C/span>body\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"6\">  \u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;\u003C/span>script\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\u003Cspan class=\"token script\">\u003Cspan class=\"token language-javascript\">\n\u003C/span>\u003C/span>\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"7\">\u003Cspan class=\"token script\">\u003Cspan class=\"token language-javascript\">    \u003Cspan class=\"token keyword\">const\u003C/span> inputEle \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token dom variable\">document\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token method function property-access\">querySelector\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">'#input'\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003C/span>\u003C/span>\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"8\">\u003Cspan class=\"token script\">\u003Cspan class=\"token language-javascript\">    \u003Cspan class=\"token keyword\">const\u003C/span> logEle \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token dom variable\">document\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token method function property-access\">querySelector\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">'#log'\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003C/span>\u003C/span>\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"9\">\u003Cspan class=\"token script\">\u003Cspan class=\"token language-javascript\">    \u003Cspan class=\"token keyword\">let\u003C/span> cnt \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003C/span>\u003C/span>\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"10\">\u003Cspan class=\"token script\">\u003Cspan class=\"token language-javascript\">    inputEle\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token method function property-access\">addEventListener\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">'input'\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token parameter\">e\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token arrow operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>\n\u003C/span>\u003C/span>\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"11\">\u003Cspan class=\"token script\">\u003Cspan class=\"token language-javascript\">        \u003Cspan class=\"token keyword\">const\u003C/span> log \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token dom variable\">document\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token method function property-access\">createElement\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">'div'\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003C/span>\u003C/span>\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"12\">\u003Cspan class=\"token script\">\u003Cspan class=\"token language-javascript\">        log\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token property-access\">textContent\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> cnt\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token method function property-access\">toString\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token method function property-access\">padStart\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token number\">3\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token string\">'0'\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">' '\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token known-class-name class-name\">JSON\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token method function property-access\">stringify\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>e\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token property-access\">target\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token property-access\">value\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003C/span>\u003C/span>\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"13\">\u003Cspan class=\"token script\">\u003Cspan class=\"token language-javascript\">        cnt\u003Cspan class=\"token operator\">++\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003C/span>\u003C/span>\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"14\">\u003Cspan class=\"token script\">\u003Cspan class=\"token language-javascript\">        logEle\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token method function property-access\">prepend\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>log\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003C/span>\u003C/span>\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"15\">\u003Cspan class=\"token script\">\u003Cspan class=\"token language-javascript\">    \u003Cspan class=\"token punctuation\">}\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003C/span>\u003C/span>\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"16\">\u003Cspan class=\"token script\">\u003Cspan class=\"token language-javascript\">  \u003C/span>\u003C/span>\u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;/\u003C/span>script\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"17\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;/\u003C/span>html\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>\u003Ccode>'이런 이슈가'\u003C/code> 값으로 \u003Ccode>input\u003C/code> 이벤트 후 다른 창 클릭 시 \u003Ccode>이런 이슈\u003C/code> 값으로 \u003Ccode>input\u003C/code> 이벤트 한 번 더 발생합니다.\n\u003Cvideo controls alt=\"bug-demo\" src=\"/img/2024-02-12-ko-windows11-hangul-ime-issue/bug-demo.mp4\">\u003C/video>\u003C/p>\n\u003Cp>추가로 해당 이슈는 구글 검색 페이지에서도 발생하고 있습니다.\n\u003Cvideo controls alt=\"google-bug-demo\" src=\"/img/2024-02-12-ko-windows11-hangul-ime-issue/google-bug-demo.mp4\">\u003C/video>\u003C/p>\n\u003Cp>직접 실험한 발동 조건과 현상은 아래와 같습니다.\u003C/p>\n\u003Cul>\n\u003Cli>\n\u003Cp>다른 창 (Process)으로 포커스 이동 시\u003Cbr>\n입력 중인 문자 삭제\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>다른 탭으로 클릭하여 포커스 이동 시\u003Cbr>\n입력 중인 문자 삭제\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>다른 탭으로 Ctrl + Tab으로 포커스 이동 시\u003Cbr>\n입력 중인 문자 삭제 되지 않음. 우리가 원함직한 동작.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>같은 Window (탭) 내의 다른 엘리먼트로 포커스 이동 시\u003Cbr>\n입력 중인 문자가 삭제된 값으로 입력 이벤트가 발동 된 후, 다시 원상복귀.\u003C/p>\n\u003C/li>\n\u003C/ul>\n\u003Ch1 id=\"2-맥의-composing-이슈와-차이점\">맥의 composing 이슈와 차이점\u003C/h1>\n\u003Cp>참고로 애플 맥에서도 한글 입력 이슈가 하나 있죠? 맥에서는 \u003Ccode>isComposing\u003C/code> 이슈가 있는데, 둘은 같은 듯 다릅니다.\n\u003Ccode>isComposing\u003C/code> 이슈는 한글과 같은 조합 문자를 조합하는 중 \u003Ccode>keydown\u003C/code> 이벤트가 특정 입력에 대해\n같은 \u003Ccode>value\u003C/code>와 같은 \u003Ccode>e.key\u003C/code>로 두 번 연달아 발생하는 것을 말합니다.\n그나마 맥 이슈는 \u003Ccode>event.isComposing\u003C/code> 값으로 분기 처리가 가능하며, \u003Cstrong>무엇보다 글자가 잘려 내려 오지는 않습니다\u003C/strong>.\u003C/p>\n\u003Ch1 id=\"3-해결법\">해결법\u003C/h1>\n\u003Cp>해결법은 어떻게 될까요? 모르겠습니다. 농담이 아니라 진짜요.\n\u003Ccode>Debounce\u003C/code>를 걸거나 하는 법 외에는 잘 모르겠습니다.\n\u003Ccode>beforeinput\u003C/code>이나, \u003Ccode>compositionstart\u003C/code> 같은 이벤트를 적절히 조합하면 될 듯 하기도 한데,\n예외 케이스나 로직을 설계하는 것이 쉽지만은 않아 보입니다.\u003C/p>\n\u003Cp>원초적인 해결법이 있기는 합니다. 바로 Windows 11에서 바뀐 IME를 예전 버전으로 되돌리는 것인데요.\n사용자 PC의 설정에서 시간 및 언어 > 언어 및 지역 > Microsoft IME 에서 호환성 > 이전 버전의 Microsoft IME를 활성화하여\n해결할 수는 있지만 사용자 디바이스의 설정을 바꾸는 것은 현실적으로 불가능한 방법이라 해야겠죠.\u003C/p>\n\u003Cp>\u003Cimg src=\"/img/2024-02-12-ko-windows11-hangul-ime-issue/ime-settings.png\" alt=\"ime-settings\">\u003C/p>",{"layout":3,"toc":4,"title":5,"category":6,"tags":8,"author":13},"post",true,"Windows 11 한글 IME 입력 이슈",[7],"Programming",[9,10,11,12],"windows","IME","hangul","javascript",[14],"이현재","2024-02-12","ko","02-12-ko-windows11-hangul-ime-issue",[19,23,26],{"depth":20,"id":21,"text":22},1,"1-Windows-11-에서의-한글-IME-입력-이슈","Windows 11 에서의 한글 IME 입력 이슈",{"depth":20,"id":24,"text":25},"2-맥의-composing-이슈와-차이점","맥의 composing 이슈와 차이점",{"depth":20,"id":27,"text":28},"3-해결법","해결법",[16]],"uses":{"params":["year","slug"]}}]}
