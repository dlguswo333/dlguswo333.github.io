<!DOCTYPE html>
<html lang="ko">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="../../../favicon.ico" />
		<meta name="viewport" content="width=device-width" />
		
		<link href="../../../_app/immutable/assets/0.091d5add.css" rel="stylesheet">
		<link rel="modulepreload" href="../../../_app/immutable/entry/start.c94a753b.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/scheduler.6402f0dd.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/singletons.9732d7ac.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/index.1b92e39a.js">
		<link rel="modulepreload" href="../../../_app/immutable/entry/app.4106f620.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/index.0cc09f3a.js">
		<link rel="modulepreload" href="../../../_app/immutable/nodes/0.31ef55e7.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/index.a82faf3f.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/GithubMark.5170f17a.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/store.be990f37.js">
		<link rel="modulepreload" href="../../../_app/immutable/nodes/5.989e3929.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/each.e59479a4.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/Category.945a9ede.js">
		<link rel="modulepreload" href="../../../_app/immutable/chunks/MainSection.49f196b2.js"><title>Windows 11 한글 IME 입력 이슈 : dlguswo333&#39;s blog</title><!-- HEAD_svelte-etxm8u_START --><!-- HEAD_svelte-etxm8u_END -->
		<!-- [TODO] For portability I can erase the following elements and inject them from index.ts when building? -->
		<title>dlguswo333's Blog</title>
		<meta name="google-site-verification" content="GIhlBkE7qu5AWLVmQ4w2lBcxEw-AumQhdQf_2zR2X4s" />
	</head>
	<body data-sveltekit-preload-data="hover">
		<script>
			const systemTheme= window.matchMedia('(prefers-color-scheme:dark)').matches ? 'dark' : 'light';
			const rootElement = document.querySelector('body');
			try {
				const storedValue = JSON.parse(localStorage.getItem('color-theme') || 'null');
				const currentTheme = storedValue === 'light' || storedValue === 'dark' ? storedValue : systemTheme;
				if(rootElement) {
  				rootElement.classList.add(currentTheme);
				}
			} catch {
				rootElement.classList.add(systemTheme);
			}
		</script>
		<div id="root">  <header class="p-2 sticky top-0 flex flex-row items-center justify-between border-b border-b-gray-300 bg-gray-50 dark:bg-[#2c3039] dark:border-b-gray-700"><div class="flex flex-row items-center gap-1"> <a href="/" class="inline-block h-8 w-8" data-svelte-h="svelte-htzscq"><span class="hidden">Go To Home</span> <img src="/favicon.svg" alt="Logo"></a> <button type="button" title="Toggle color theme" class="group"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" class="h-8 w-8 transition"><rect x="3" y="3" width="94" height="94" stroke-width="6" rx="16" ry="16" class="stroke-gray-600 fill-none"></rect></svg></button> </div> <div class="flex flex-row items-center"><a href="/categories/" class="h-8 flex items-center justify-center mr-2 last:mr-1 px-1 py-0.5 rounded hover:bg-gray-200 dark:hover:bg-slate-600 dark:hover:text-white">Categories</a> <a href="/tags/" class="h-8 flex items-center justify-center mr-2 last:mr-1 px-1 py-0.5 rounded hover:bg-gray-200 dark:hover:bg-slate-600 dark:hover:text-white">Tags</a> <a href="/about/" class="h-8 flex items-center justify-center mr-2 last:mr-1 px-1 py-0.5 rounded hover:bg-gray-200 dark:hover:bg-slate-600 dark:hover:text-white">About</a></div></header>  <div class="flex flex-row flex-grow justify-center p-2 lg:p-0 lg:pr-[300px]"> <aside class="w-[300px] overflow-hidden hidden mt-10 self-start md:!flex md:sticky md:top-14 flex-col justify-center items-center p-3
  "><div class="relative w-full"><ul class="max-h-[80vh] overflow-auto"> <li title="Windows 11 에서의 한글 IME 입력 이슈" class="flex border-l-4 border-transparent hover:border-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 font-bold 
        "><a href="#1-Windows-11-에서의-한글-IME-입력-이슈" class="relative z-10 py-0.5 whitespace-nowrap overflow-hidden break-all overflow-ellipsis flex-grow" style="padding-left: 0.3rem;">Windows 11 에서의 한글 IME 입력 이슈</a> </li> <li title="맥의 composing 이슈와 차이점" class="flex border-l-4 border-transparent hover:border-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 font-bold 
        "><a href="#2-맥의-composing-이슈와-차이점" class="relative z-10 py-0.5 whitespace-nowrap overflow-hidden break-all overflow-ellipsis flex-grow" style="padding-left: 0.3rem;">맥의 composing 이슈와 차이점</a> </li> <li title="해결법" class="flex border-l-4 border-transparent hover:border-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 font-bold 
        "><a href="#3-해결법" class="relative z-10 py-0.5 whitespace-nowrap overflow-hidden break-all overflow-ellipsis flex-grow" style="padding-left: 0.3rem;">해결법</a> </li></ul> </div></aside>  <div class="flex flex-col justify-center min-w-0 my-10 md:my-15"><div class="max-w-[900px] flex flex-col items-center py-6 gap-3"><h1 class="text-4xl font-bold text-center">Windows 11 한글 IME 입력 이슈</h1> <span>2024-02-12 </span> <button class="px-2 py-0.5 rounded-lg shadow-md shadow-emerald-50 border-l-slate-100 bg-sky-300 text-white hover:bg-sky-500 dark:shadow-emerald-900 transition">/Programming</button> <div><button class="last:mr-0 bg-green-100 hover:bg-green-400 hover:text-white dark:text-black transition px-2 py-0.5 rounded-xl shadow-md dark:shadow-green-900 my-0.5" style="margin-right: 0.25rem; margin-left: 0.5rem">#windows</button><button class="last:mr-0 bg-green-100 hover:bg-green-400 hover:text-white dark:text-black transition px-2 py-0.5 rounded-xl shadow-md dark:shadow-green-900 my-0.5" style="margin-right: 0.25rem; margin-left: 0rem">#IME</button><button class="last:mr-0 bg-green-100 hover:bg-green-400 hover:text-white dark:text-black transition px-2 py-0.5 rounded-xl shadow-md dark:shadow-green-900 my-0.5" style="margin-right: 0.25rem; margin-left: 0rem">#hangul</button><button class="last:mr-0 bg-green-100 hover:bg-green-400 hover:text-white dark:text-black transition px-2 py-0.5 rounded-xl shadow-md dark:shadow-green-900 my-0.5" style="margin-right: 0.25rem; margin-left: 0rem">#javascript</button></div></div> <hr class="bg-gray-400 my-4">  <main class="max-w-[900px] w-full py-2 post"> <!-- HTML_TAG_START --><h1 id="1-Windows-11-에서의-한글-IME-입력-이슈">Windows 11 에서의 한글 IME 입력 이슈</h1>
<p>웹앱 개발 중 윈도우 11에서 발생하는 한글 입력 중 마지막 음절이 지워지는 아주 골 때리는 현상을 겪었습니다.
한글 입력 중 다른 창/탭으로 포커스가 이동하면 입력 중인 글자가 지워지는 것인데요.
또한 같은 window의 다른 엘리먼트 마우스 클릭으로 인하여 포커스를 잃을 경우에도
<code>'input'</code> 이벤트가 연달아 두 번 발생하는데, 입력 중인 글자가 지워진 value로 한 번,
그리고 마지막 글자가 원상 복귀 된 value로 한 번 이렇게 발생합니다.
다음은 재현을 위한 간단한 HTML 코드 예시입니다.
동작에 영향을 줄 만한 코드가 없음에도 이슈가 발생하는 것을 확인할 수 있습니다.</p>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line line-number" line="1"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>html</span><span class="token punctuation">></span></span>
</span><span class="code-line line-number" line="2">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>body</span><span class="token punctuation">></span></span>
</span><span class="code-line line-number" line="3">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>input<span class="token punctuation">'</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>text<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>
</span><span class="code-line line-number" line="4">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>log<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
</span><span class="code-line line-number" line="5">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>body</span><span class="token punctuation">></span></span>
</span><span class="code-line line-number" line="6">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line line-number" line="7"><span class="token script"><span class="token language-javascript">    <span class="token keyword">const</span> inputEle <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">'#input'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="8"><span class="token script"><span class="token language-javascript">    <span class="token keyword">const</span> logEle <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">'#log'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="9"><span class="token script"><span class="token language-javascript">    <span class="token keyword">let</span> cnt <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="10"><span class="token script"><span class="token language-javascript">    inputEle<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line line-number" line="11"><span class="token script"><span class="token language-javascript">        <span class="token keyword">const</span> log <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="12"><span class="token script"><span class="token language-javascript">        log<span class="token punctuation">.</span><span class="token property-access">textContent</span> <span class="token operator">=</span> cnt<span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">padStart</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> <span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">stringify</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="13"><span class="token script"><span class="token language-javascript">        cnt<span class="token operator">++</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="14"><span class="token script"><span class="token language-javascript">        logEle<span class="token punctuation">.</span><span class="token method function property-access">prepend</span><span class="token punctuation">(</span>log<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="15"><span class="token script"><span class="token language-javascript">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="16"><span class="token script"><span class="token language-javascript">  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</span><span class="code-line line-number" line="17"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>html</span><span class="token punctuation">></span></span>
</span></code></pre>
<p><code>'이런 이슈가'</code> 값으로 <code>input</code> 이벤트 후 다른 창 클릭 시 <code>이런 이슈</code> 값으로 <code>input</code> 이벤트 한 번 더 발생합니다.
<video controls alt="bug-demo" src="/img/2024-02-12-ko-windows11-hangul-ime-issue/bug-demo.mp4"></video></p>
<p>추가로 해당 이슈는 구글 검색 페이지에서도 발생하고 있습니다.
<video controls alt="google-bug-demo" src="/img/2024-02-12-ko-windows11-hangul-ime-issue/google-bug-demo.mp4"></video></p>
<p>직접 실험한 발동 조건과 현상은 아래와 같습니다.</p>
<ul>
<li>
<p>다른 창 (Process)으로 포커스 이동 시<br>
입력 중인 문자 삭제</p>
</li>
<li>
<p>다른 탭으로 클릭하여 포커스 이동 시<br>
입력 중인 문자 삭제</p>
</li>
<li>
<p>다른 탭으로 Ctrl + Tab으로 포커스 이동 시<br>
입력 중인 문자 삭제 되지 않음. 우리가 원함직한 동작.</p>
</li>
<li>
<p>같은 Window (탭) 내의 다른 엘리먼트로 포커스 이동 시<br>
입력 중인 문자가 삭제된 값으로 입력 이벤트가 발동 된 후, 다시 원상복귀.</p>
</li>
</ul>
<h1 id="2-맥의-composing-이슈와-차이점">맥의 composing 이슈와 차이점</h1>
<p>참고로 애플 맥에서도 한글 입력 이슈가 하나 있죠? 맥에서는 <code>isComposing</code> 이슈가 있는데, 둘은 같은 듯 다릅니다.
<code>isComposing</code> 이슈는 한글과 같은 조합 문자를 조합하는 중 <code>keydown</code> 이벤트가 특정 입력에 대해
같은 <code>value</code>와 같은 <code>e.key</code>로 두 번 연달아 발생하는 것을 말합니다.
그나마 맥 이슈는 <code>event.isComposing</code> 값으로 분기 처리가 가능하며, <strong>무엇보다 글자가 잘려 내려 오지는 않습니다</strong>.</p>
<h1 id="3-해결법">해결법</h1>
<p>해결법은 어떻게 될까요? 모르겠습니다. 농담이 아니라 진짜요.
<code>Debounce</code>를 걸거나 하는 법 외에는 잘 모르겠습니다.
<code>beforeinput</code>이나, <code>compositionstart</code> 같은 이벤트를 적절히 조합하면 될 듯 하기도 한데,
예외 케이스나 로직을 설계하는 것이 쉽지만은 않아 보입니다.</p>
<p>원초적인 해결법이 있기는 합니다. 바로 Windows 11에서 바뀐 IME를 예전 버전으로 되돌리는 것인데요.
사용자 PC의 설정에서 시간 및 언어 > 언어 및 지역 > Microsoft IME 에서 호환성 > 이전 버전의 Microsoft IME를 활성화하여
해결할 수는 있지만 사용자 디바이스의 설정을 바꾸는 것은 현실적으로 불가능한 방법이라 해야겠죠.</p>
<p><img src="/img/2024-02-12-ko-windows11-hangul-ime-issue/ime-settings.png" alt="ime-settings"></p><!-- HTML_TAG_END --></main></div></div> <footer class="p-2 py-5 text-sm flex gap-1 flex-col md:flex-row items-center justify-between border-t border-gray-300 bg-gray-50 dark:border-gray-700 dark:bg-[#2c3039]"><div>©️ 2021~2023 dlguswo333; All rights reserved.</div> <div class="flex items-center"><a class="inline-flex items-center" href="https://github.com/dlguswo333/dlguswo333.github.io"><img class="inline h-4 w-4 mr-1" src="/github-mark.svg" alt="github-mark"></a>
    Built with Sveltekit.</div></footer>  
			
			<script>
				{
					__sveltekit_10zi5of = {
						base: new URL("../../..", location).pathname.slice(0, -1),
						env: {}
					};

					const element = document.currentScript.parentElement;

					const data = [null,{"type":"data","data":{html:"\u003Ch1 id=\"1-Windows-11-에서의-한글-IME-입력-이슈\">Windows 11 에서의 한글 IME 입력 이슈\u003C/h1>\n\u003Cp>웹앱 개발 중 윈도우 11에서 발생하는 한글 입력 중 마지막 음절이 지워지는 아주 골 때리는 현상을 겪었습니다.\n한글 입력 중 다른 창/탭으로 포커스가 이동하면 입력 중인 글자가 지워지는 것인데요.\n또한 같은 window의 다른 엘리먼트 마우스 클릭으로 인하여 포커스를 잃을 경우에도\n\u003Ccode>'input'\u003C/code> 이벤트가 연달아 두 번 발생하는데, 입력 중인 글자가 지워진 value로 한 번,\n그리고 마지막 글자가 원상 복귀 된 value로 한 번 이렇게 발생합니다.\n다음은 재현을 위한 간단한 HTML 코드 예시입니다.\n동작에 영향을 줄 만한 코드가 없음에도 이슈가 발생하는 것을 확인할 수 있습니다.\u003C/p>\n\u003Cpre class=\"language-html\">\u003Ccode class=\"language-html code-highlight\">\u003Cspan class=\"code-line line-number\" line=\"1\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;\u003C/span>html\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"2\">    \u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;\u003C/span>body\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"3\">      \u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;\u003C/span>input\u003C/span> \u003Cspan class=\"token attr-name\">id\u003C/span>\u003Cspan class=\"token attr-value\">\u003Cspan class=\"token punctuation attr-equals\">=\u003C/span>\u003Cspan class=\"token punctuation\">'\u003C/span>input\u003Cspan class=\"token punctuation\">'\u003C/span>\u003C/span> \u003Cspan class=\"token attr-name\">type\u003C/span>\u003Cspan class=\"token attr-value\">\u003Cspan class=\"token punctuation attr-equals\">=\u003C/span>\u003Cspan class=\"token punctuation\">'\u003C/span>text\u003Cspan class=\"token punctuation\">'\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"4\">      \u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;\u003C/span>div\u003C/span> \u003Cspan class=\"token attr-name\">id\u003C/span>\u003Cspan class=\"token attr-value\">\u003Cspan class=\"token punctuation attr-equals\">=\u003C/span>\u003Cspan class=\"token punctuation\">\"\u003C/span>log\u003Cspan class=\"token punctuation\">\"\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;/\u003C/span>div\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"5\">    \u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;/\u003C/span>body\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"6\">  \u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;\u003C/span>script\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\u003Cspan class=\"token script\">\u003Cspan class=\"token language-javascript\">\n\u003C/span>\u003C/span>\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"7\">\u003Cspan class=\"token script\">\u003Cspan class=\"token language-javascript\">    \u003Cspan class=\"token keyword\">const\u003C/span> inputEle \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token dom variable\">document\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token method function property-access\">querySelector\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">'#input'\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003C/span>\u003C/span>\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"8\">\u003Cspan class=\"token script\">\u003Cspan class=\"token language-javascript\">    \u003Cspan class=\"token keyword\">const\u003C/span> logEle \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token dom variable\">document\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token method function property-access\">querySelector\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">'#log'\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003C/span>\u003C/span>\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"9\">\u003Cspan class=\"token script\">\u003Cspan class=\"token language-javascript\">    \u003Cspan class=\"token keyword\">let\u003C/span> cnt \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003C/span>\u003C/span>\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"10\">\u003Cspan class=\"token script\">\u003Cspan class=\"token language-javascript\">    inputEle\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token method function property-access\">addEventListener\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">'input'\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token parameter\">e\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token arrow operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">{\u003C/span>\n\u003C/span>\u003C/span>\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"11\">\u003Cspan class=\"token script\">\u003Cspan class=\"token language-javascript\">        \u003Cspan class=\"token keyword\">const\u003C/span> log \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token dom variable\">document\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token method function property-access\">createElement\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">'div'\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003C/span>\u003C/span>\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"12\">\u003Cspan class=\"token script\">\u003Cspan class=\"token language-javascript\">        log\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token property-access\">textContent\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> cnt\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token method function property-access\">toString\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token method function property-access\">padStart\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token number\">3\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token string\">'0'\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">' '\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token known-class-name class-name\">JSON\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token method function property-access\">stringify\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>e\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token property-access\">target\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token property-access\">value\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003C/span>\u003C/span>\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"13\">\u003Cspan class=\"token script\">\u003Cspan class=\"token language-javascript\">        cnt\u003Cspan class=\"token operator\">++\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003C/span>\u003C/span>\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"14\">\u003Cspan class=\"token script\">\u003Cspan class=\"token language-javascript\">        logEle\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token method function property-access\">prepend\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>log\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003C/span>\u003C/span>\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"15\">\u003Cspan class=\"token script\">\u003Cspan class=\"token language-javascript\">    \u003Cspan class=\"token punctuation\">}\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003C/span>\u003C/span>\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"16\">\u003Cspan class=\"token script\">\u003Cspan class=\"token language-javascript\">  \u003C/span>\u003C/span>\u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;/\u003C/span>script\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003Cspan class=\"code-line line-number\" line=\"17\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&#x3C;/\u003C/span>html\u003C/span>\u003Cspan class=\"token punctuation\">>\u003C/span>\u003C/span>\n\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>\u003Ccode>'이런 이슈가'\u003C/code> 값으로 \u003Ccode>input\u003C/code> 이벤트 후 다른 창 클릭 시 \u003Ccode>이런 이슈\u003C/code> 값으로 \u003Ccode>input\u003C/code> 이벤트 한 번 더 발생합니다.\n\u003Cvideo controls alt=\"bug-demo\" src=\"/img/2024-02-12-ko-windows11-hangul-ime-issue/bug-demo.mp4\">\u003C/video>\u003C/p>\n\u003Cp>추가로 해당 이슈는 구글 검색 페이지에서도 발생하고 있습니다.\n\u003Cvideo controls alt=\"google-bug-demo\" src=\"/img/2024-02-12-ko-windows11-hangul-ime-issue/google-bug-demo.mp4\">\u003C/video>\u003C/p>\n\u003Cp>직접 실험한 발동 조건과 현상은 아래와 같습니다.\u003C/p>\n\u003Cul>\n\u003Cli>\n\u003Cp>다른 창 (Process)으로 포커스 이동 시\u003Cbr>\n입력 중인 문자 삭제\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>다른 탭으로 클릭하여 포커스 이동 시\u003Cbr>\n입력 중인 문자 삭제\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>다른 탭으로 Ctrl + Tab으로 포커스 이동 시\u003Cbr>\n입력 중인 문자 삭제 되지 않음. 우리가 원함직한 동작.\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>같은 Window (탭) 내의 다른 엘리먼트로 포커스 이동 시\u003Cbr>\n입력 중인 문자가 삭제된 값으로 입력 이벤트가 발동 된 후, 다시 원상복귀.\u003C/p>\n\u003C/li>\n\u003C/ul>\n\u003Ch1 id=\"2-맥의-composing-이슈와-차이점\">맥의 composing 이슈와 차이점\u003C/h1>\n\u003Cp>참고로 애플 맥에서도 한글 입력 이슈가 하나 있죠? 맥에서는 \u003Ccode>isComposing\u003C/code> 이슈가 있는데, 둘은 같은 듯 다릅니다.\n\u003Ccode>isComposing\u003C/code> 이슈는 한글과 같은 조합 문자를 조합하는 중 \u003Ccode>keydown\u003C/code> 이벤트가 특정 입력에 대해\n같은 \u003Ccode>value\u003C/code>와 같은 \u003Ccode>e.key\u003C/code>로 두 번 연달아 발생하는 것을 말합니다.\n그나마 맥 이슈는 \u003Ccode>event.isComposing\u003C/code> 값으로 분기 처리가 가능하며, \u003Cstrong>무엇보다 글자가 잘려 내려 오지는 않습니다\u003C/strong>.\u003C/p>\n\u003Ch1 id=\"3-해결법\">해결법\u003C/h1>\n\u003Cp>해결법은 어떻게 될까요? 모르겠습니다. 농담이 아니라 진짜요.\n\u003Ccode>Debounce\u003C/code>를 걸거나 하는 법 외에는 잘 모르겠습니다.\n\u003Ccode>beforeinput\u003C/code>이나, \u003Ccode>compositionstart\u003C/code> 같은 이벤트를 적절히 조합하면 될 듯 하기도 한데,\n예외 케이스나 로직을 설계하는 것이 쉽지만은 않아 보입니다.\u003C/p>\n\u003Cp>원초적인 해결법이 있기는 합니다. 바로 Windows 11에서 바뀐 IME를 예전 버전으로 되돌리는 것인데요.\n사용자 PC의 설정에서 시간 및 언어 > 언어 및 지역 > Microsoft IME 에서 호환성 > 이전 버전의 Microsoft IME를 활성화하여\n해결할 수는 있지만 사용자 디바이스의 설정을 바꾸는 것은 현실적으로 불가능한 방법이라 해야겠죠.\u003C/p>\n\u003Cp>\u003Cimg src=\"/img/2024-02-12-ko-windows11-hangul-ime-issue/ime-settings.png\" alt=\"ime-settings\">\u003C/p>",frontmatter:{layout:"post",toc:true,title:"Windows 11 한글 IME 입력 이슈",category:["Programming"],tags:["windows","IME","hangul","javascript"],author:["이현재"]},date:"2024-02-12",lang:"ko",tocData:[{depth:1,id:"1-Windows-11-에서의-한글-IME-입력-이슈",text:"Windows 11 에서의 한글 IME 입력 이슈"},{depth:1,id:"2-맥의-composing-이슈와-차이점",text:"맥의 composing 이슈와 차이점"},{depth:1,id:"3-해결법",text:"해결법"}]},"uses":{"params":["year","slug"]}}];

					Promise.all([
						import("../../../_app/immutable/entry/start.c94a753b.js"),
						import("../../../_app/immutable/entry/app.4106f620.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 5],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
